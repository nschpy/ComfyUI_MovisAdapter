# ComfyUI MoviePy Adapter (MPA)

MoviePy Adapter - —ç—Ç–æ –Ω–∞–±–æ—Ä –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –Ω–æ–¥ –¥–ª—è ComfyUI, –∫–æ—Ç–æ—Ä—ã–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ MoviePy –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –≤–∏–¥–µ–æ.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üé¨ –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤–∏–¥–µ–æ
- **MPA Combine Videos** - –æ–±—ä–µ–¥–∏–Ω—è–π—Ç–µ –¥–æ 10 –≤–∏–¥–µ–æ –≤ –æ–¥–Ω–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ –≤–∏–¥–µ–æ
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è —á–∞—Å—Ç–æ—Ç–∞ –∫–∞–¥—Ä–æ–≤ (FPS)

### ‚ú® –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –≤–∏–¥–µ–æ
- **MPA Video Transition** - —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã:
  - **crossfade** - –ø–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ –∏ –ø–æ—è–≤–ª–µ–Ω–∏–µ
  - **fadein** - –ø–æ—è–≤–ª–µ–Ω–∏–µ –∏–∑ —á—ë—Ä–Ω–æ–≥–æ
  - **fadeout** - –∑–∞—Ç—É—Ö–∞–Ω–∏–µ –≤ —á—ë—Ä–Ω—ã–π
  - **fadeinout** - –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–∞

### üé® –í–∏–¥–µ–æ—ç—Ñ—Ñ–µ–∫—Ç—ã

#### MPA Brightness Effect
–ò–∑–º–µ–Ω–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç–∏ –≤–∏–¥–µ–æ —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ 0.01

#### MPA Contrast Effect
–†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è

#### MPA Speed Effect
–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ (factor > 1.0)
- –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ/Slow Motion (factor < 1.0)
- –î–∏–∞–ø–∞–∑–æ–Ω: –æ—Ç 0.1x –¥–æ 10x

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ú–µ—Ç–æ–¥ 1: –ß–µ—Ä–µ–∑ pip (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cd ComfyUI/custom_nodes/ComfyUI_MovisAdapter
pip install -e .
```

### –ú–µ—Ç–æ–¥ 2: –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install moviepy>=1.0.3 numpy>=1.20.0 torch>=1.13.0
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—Å–º. –≤—ã—à–µ)
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ ComfyUI
3. –í –º–µ–Ω—é –Ω–æ–¥ –Ω–∞–π–¥–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é **MPA/video**
4. –î–æ–±–∞–≤—å—Ç–µ –Ω—É–∂–Ω—ã–µ –Ω–æ–¥—ã –Ω–∞ —Ä–∞–±–æ—á–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/ComfyUI_MovisAdapter/
‚îú‚îÄ‚îÄ common.py          # –û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ IMAGE ‚Üî MoviePy
‚îú‚îÄ‚îÄ nodes.py           # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –Ω–æ–¥
‚îî‚îÄ‚îÄ node_types/
    ‚îú‚îÄ‚îÄ CombineVideos/
    ‚îú‚îÄ‚îÄ VideoTransition/
    ‚îú‚îÄ‚îÄ BrightnessEffect/
    ‚îú‚îÄ‚îÄ ContrastEffect/
    ‚îî‚îÄ‚îÄ SpeedEffect/
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ —Å –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏

```
[–í–∏–¥–µ–æ 1] ‚Üí [MPA Video Transition] ‚Üí [–í–∏–¥–µ–æ 2] ‚Üí [MPA Video Transition] ‚Üí [–í–∏–¥–µ–æ 3]
                  ‚Üì (crossfade)                        ‚Üì (fadeinout)
                           [MPA Combine Videos] ‚Üí [–†–µ–∑—É–ª—å—Ç–∞—Ç]
```

### Slow Motion —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏

```
[–í–∏–¥–µ–æ] ‚Üí [MPA Speed Effect (0.5x)] ‚Üí [MPA Brightness Effect (1.2)] ‚Üí [–†–µ–∑—É–ª—å—Ç–∞—Ç]
```

### –ú–æ–Ω—Ç–∞–∂ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–ª–∏–ø–æ–≤

```
[–ö–ª–∏–ø 1] ‚îÄ‚îÄ‚îê
[–ö–ª–∏–ø 2] ‚îÄ‚îÄ‚î§
[–ö–ª–∏–ø 3] ‚îÄ‚îÄ‚îº‚îÄ‚Üí [MPA Combine Videos] ‚Üí [–†–µ–∑—É–ª—å—Ç–∞—Ç]
[–ö–ª–∏–ø 4] ‚îÄ‚îÄ‚î§
[–ö–ª–∏–ø 5] ‚îÄ‚îÄ‚îò
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
- **–í—Ö–æ–¥:** ComfyUI `IMAGE` —Ç–µ–Ω–∑–æ—Ä `[B, H, W, C]`
- **–í—ã—Ö–æ–¥:** ComfyUI `IMAGE` —Ç–µ–Ω–∑–æ—Ä `[B, H, W, C]`
- **–ó–Ω–∞—á–µ–Ω–∏—è:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–µ–∂–¥—É `[0, 1]` (ComfyUI) –∏ `[0, 255]` (MoviePy)

### FPS (Frames Per Second)
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 24 fps
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–¥—ã –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ
- –î–∏–∞–ø–∞–∑–æ–Ω: 1-120 fps

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ñ–∞–π–ª–µ [IMPLEMENTATION.md](IMPLEMENTATION.md).

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python >= 3.10
- ComfyUI (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π)
- moviepy >= 1.0.3
- numpy >= 1.20.0
- torch >= 1.13.0

## Roadmap / –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã: blur, rotate, scale
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—É–¥–∏–æ–¥–æ—Ä–æ–∂–µ–∫
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è 4K –≤–∏–¥–µ–æ
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] –ë–∞—Ç—á-–æ–±—Ä–∞–±–æ—Ç–∫–∞
- [ ] –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–¥

–í—Å–µ –Ω–æ–¥—ã –∏–º–µ—é—Ç –ø—Ä–µ—Ñ–∏–∫—Å **MPA** (MoviePy Adapter) –∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ `MPA/video`:

| –ù–æ–¥–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã |
|------|------------|-------------------|
| **MPA Combine Videos** | –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤–∏–¥–µ–æ | IMAGE1-10, fps |
| **MPA Video Transition** | –ü–µ—Ä–µ—Ö–æ–¥—ã | IMAGE1, IMAGE2, transition_type, duration, fps |
| **MPA Brightness Effect** | –Ø—Ä–∫–æ—Å—Ç—å | IMAGE, factor (0-3), fps |
| **MPA Contrast Effect** | –ö–æ–Ω—Ç—Ä–∞—Å—Ç | IMAGE, factor (0-3), fps |
| **MPA Speed Effect** | –°–∫–æ—Ä–æ—Å—Ç—å | IMAGE, factor (0.1-10), fps |

## –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è pull requests! –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∏–¥–µ–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –∏–ª–∏ –≤—ã –Ω–∞—à–ª–∏ –±–∞–≥ - —Å–æ–∑–¥–∞–π—Ç–µ issue.

## –õ–∏—Ü–µ–Ω–∑–∏—è

GNU General Public License v3

## –ê–≤—Ç–æ—Ä

**nschpy** - [GitHub](https://github.com/nschpy/ComfyUI_MovisAdapter)

---

**–í–µ—Ä—Å–∏—è:** 0.0.1  
**–î–∞—Ç–∞:** 2025

–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –∫–æ–º—å—é–Ω–∏—Ç–∏ ComfyUI
